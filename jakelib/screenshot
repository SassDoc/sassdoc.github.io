const denodeify = require('es6-denodeify')(Promise)
const screenshot = require('electron-screenshot-service')
const fs = require('fs')
const writeFile = denodeify(fs.writeFile)

jake.addListener('complete', () => screenshot.close())

export default opts =>
  screenshot(opts)
    .then(img => writeFile(opts.dest, img.data))
